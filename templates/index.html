<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Detection - AI Challenge 2025</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <span class="logo-icon">üåø</span>
                    <div>
                        <h1>Plant Disease Detection</h1>
                        <p class="subtitle">Ph√°t hi·ªán b·ªánh c√¢y tr·ªìng b·∫±ng AI</p>
                    </div>
                </div>
                <div class="header-badge">
                    <span class="badge">AI Challenge 2025</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Introduction Section -->
        <section class="intro-section">
            <div class="intro-grid">
                <div class="intro-card feature-card">
                    <div class="card-icon">üéØ</div>
                    <h3>M·ª•c Ti√™u</h3>
                    <p>H·ªó tr·ª£ n√¥ng d√¢n ph√°t hi·ªán s·ªõm b·ªánh c√¢y tr·ªìng, gi·∫£m thi·ªát h·∫°i m√πa m√†ng v√† tƒÉng nƒÉng su·∫•t n√¥ng nghi·ªáp Vi·ªát Nam</p>
                </div>
                <div class="intro-card feature-card">
                    <div class="card-icon">ü§ñ</div>
                    <h3>C√¥ng Ngh·ªá</h3>
                    <p>S·ª≠ d·ª•ng Deep Learning v√† Computer Vision ƒë·ªÉ ph√¢n t√≠ch h√¨nh ·∫£nh l√° c√¢y v·ªõi ƒë·ªô ch√≠nh x√°c cao</p>
                </div>
                <div class="intro-card feature-card">
                    <div class="card-icon">üíä</div>
                    <h3>Gi·∫£i Ph√°p</h3>
                    <p>ƒê∆∞a ra ch·∫©n ƒëo√°n chi ti·∫øt v√† g·ª£i √Ω ƒëi·ªÅu tr·ªã ph√π h·ª£p v·ªõi ƒëi·ªÅu ki·ªán canh t√°c t·∫°i Vi·ªát Nam</p>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section class="upload-section">
            <div class="section-header">
                <h2>üì∏ T·∫£i ·∫¢nh L√™n</h2>
                <p class="section-subtitle">Ch·ªçn ·∫£nh l√° c√¢y ƒë·ªÉ ph√¢n t√≠ch b·ªánh</p>
            </div>
            
            <div class="upload-container">
                <!-- File Upload -->
                <div class="upload-method">
                    <div class="method-header">
                        <span class="method-icon">üìÅ</span>
                        <h3>Upload t·ª´ File</h3>
                    </div>
                    <div class="file-upload-area" id="fileUploadArea">
                        <input type="file" id="fileInput" accept="image/png,image/jpeg,image/jpg" hidden>
                        <label for="fileInput" class="upload-label">
                            <div class="upload-icon-large">üì§</div>
                            <span class="upload-text">K√©o th·∫£ ·∫£nh v√†o ƒë√¢y</span>
                            <span class="upload-subtext">ho·∫∑c nh·∫•n ƒë·ªÉ ch·ªçn file</span>
                            <span class="upload-hint">PNG, JPG, JPEG ‚Ä¢ T·ªëi ƒëa 16MB</span>
                        </label>
                    </div>
                </div>

                <!-- Webcam Capture -->
                <div class="upload-method">
                    <div class="method-header">
                        <span class="method-icon">üì∑</span>
                        <h3>Ch·ª•p t·ª´ Webcam</h3>
                    </div>
                    <div class="webcam-container">
                        <div class="webcam-wrapper">
                            <video id="webcam" autoplay playsinline></video>
                            <canvas id="canvas" hidden></canvas>
                            <div class="webcam-placeholder" id="webcamPlaceholder">
                                <div class="placeholder-icon">üìπ</div>
                                <p>Nh·∫•n "B·∫≠t Webcam" ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
                            </div>
                        </div>
                        <div class="webcam-controls">
                            <button id="startWebcamBtn" class="btn btn-primary">
                                <span>üì∑</span> B·∫≠t Webcam
                            </button>
                            <button id="captureBtn" class="btn btn-success" disabled>
                                <span>üì∏</span> Ch·ª•p ·∫¢nh
                            </button>
                            <button id="stopWebcamBtn" class="btn btn-secondary" disabled>
                                <span>‚ùå</span> T·∫Øt
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Image Preview -->
            <div id="previewSection" class="preview-section" hidden>
                <div class="preview-card">
                    <h3>‚úÖ ·∫¢nh ƒê√£ Ch·ªçn</h3>
                    <div class="preview-image-container">
                        <img id="previewImage" alt="Preview">
                    </div>
                    <div class="preview-actions">
                        <button id="analyzeBtn" class="btn btn-large btn-primary">
                            <span>üîç</span> Ph√¢n T√≠ch Ngay
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="loading" hidden>
            <div class="spinner"></div>
            <p>ƒêang ph√¢n t√≠ch ·∫£nh...</p>
        </div>

        <!-- Results Section -->
        <section id="resultsSection" class="results-section" hidden>
            <div class="section-header">
                <h2>‚úÖ K·∫øt Qu·∫£ Ph√¢n T√≠ch</h2>
                <p class="section-subtitle">D·ª± ƒëo√°n b·ªánh v√† g·ª£i √Ω ƒëi·ªÅu tr·ªã</p>
            </div>
            
            <!-- Main Result Card -->
            <div class="main-result-card">
                <div class="result-image-section">
                    <div class="result-image-wrapper">
                        <img id="resultImage" alt="Analyzed image">
                    </div>
                </div>
                <div class="result-info-section">
                    <div class="disease-badge">
                        <h3 id="diseaseName" class="disease-name">-</h3>
                        <div id="severityIndicator" class="severity-badge"></div>
                    </div>
                    <div class="confidence-display" id="confidenceBadge">
                        <div class="confidence-circle">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <path id="confidenceCircle" class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <text x="18" y="20.35" class="percentage" id="confidenceText">0%</text>
                            </svg>
                        </div>
                        <span class="confidence-label">ƒê·ªô Tin C·∫≠y</span>
                    </div>
                </div>
            </div>

            <!-- Top 3 Predictions -->
            <div class="predictions-section">
                <h3 class="subsection-title">üèÜ Top 3 D·ª± ƒêo√°n</h3>
                <div id="top3Predictions" class="predictions-grid"></div>
            </div>

            <!-- Confidence Chart -->
            <div class="chart-section">
                <h3 class="subsection-title">üìà Bi·ªÉu ƒê·ªì ƒê·ªô Tin C·∫≠y</h3>
                <div class="chart-wrapper">
                    <canvas id="confidenceChart"></canvas>
                </div>
            </div>

            <!-- Treatment Recommendations -->
            <div class="treatment-section">
                <h3 class="subsection-title">üíä G·ª£i √ù Kh·∫Øc Ph·ª•c</h3>
                <div class="treatment-grid">
                    <div class="treatment-card">
                        <div class="treatment-header">
                            <span class="treatment-icon">üîç</span>
                            <h4>Ch·∫©n ƒêo√°n</h4>
                        </div>
                        <p id="diagnosis" class="treatment-content">-</p>
                    </div>
                    <div class="treatment-card">
                        <div class="treatment-header">
                            <span class="treatment-icon">üíä</span>
                            <h4>C√°ch ƒêi·ªÅu Tr·ªã</h4>
                        </div>
                        <p id="treatment" class="treatment-content">-</p>
                    </div>
                    <div class="treatment-card full-width">
                        <div class="treatment-header">
                            <span class="treatment-icon">üõ°Ô∏è</span>
                            <h4>Bi·ªán Ph√°p Ph√≤ng Ng·ª´a</h4>
                        </div>
                        <ul id="preventionList" class="prevention-list"></ul>
                    </div>
                </div>
            </div>

            <div class="result-actions">
                <button id="newAnalysisBtn" class="btn btn-large btn-primary">
                    <span>üîÑ</span> Ph√¢n T√≠ch ·∫¢nh M·ªõi
                </button>
            </div>
        </section>

        <!-- History Section -->
        <section class="history-section">
            <div class="section-header">
                <h2>üìú L·ªãch S·ª≠ D·ª± ƒêo√°n</h2>
                <button id="clearHistoryBtn" class="btn btn-secondary btn-sm">
                    <span>üóëÔ∏è</span> X√≥a L·ªãch S·ª≠
                </button>
            </div>
            <div id="historyList" class="history-grid">
                <p class="empty-message">Ch∆∞a c√≥ l·ªãch s·ª≠ d·ª± ƒëo√°n</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>üå± Plant Disease Detection</h4>
                    <p>H·ªá th·ªëng AI h·ªó tr·ª£ n√¥ng nghi·ªáp th√¥ng minh</p>
                </div>
                <div class="footer-section">
                    <p><strong>AI Challenge 2025</strong></p>
                    <p>Ph√°t tri·ªÉn b·ªüi [T√™n ƒë·ªôi]</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Plant Disease Detection. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/static/js/main.js"></script>
    <script src="/static/js/chart_handler.js"></script>
</body>
</html>
